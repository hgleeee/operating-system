# 스케줄링
## 프로세스를 스케줄링하기 위한 큐
> 프로세스의 상태 관리는 커널 주소 영역 중 데이터 영역에 다양한 큐를 두어 수행

### 준비 큐 (Ready Queue)
> 운영체제가 준비 상태의 프로세스들을 줄세우기 위한 큐
- 준비 큐의 제일 앞에 있는 프로세스에게 CPU를 할당한다.
### 장치 큐 (Device Queue)
> 특정 자원을 기다리는 프로세스들을 줄세우기 위한 큐, 자원별로 장치큐를 둔다.
- 예를 들어, 디스크에 입출력 서비스를 요청한 프로세스들은 __디스크 입출력 큐__ 에 줄서게 된다. 디스크 컨트롤러는 큐에 줄선 순서대로 프로세스들의 입출력 작업을 수행한다.
- 프로세스 별 입출력 작업이 완료되면 디스크 컨트롤러가 CPU에 인터럽트를 발생시키고, 인터럽트 처리루틴에 의해 해당 프로세스는 입출력 큐에서 빠져나와 CPU를 기다리는 준비 큐에 줄서게 된다. 
### 작업 큐 (Job Queue)
> 시스템 내의 모든 프로세스를 관리하기 위한 큐
- 프로세스의 상태와 무관하게 현재 시스템 내에 속한 모든 프로세스가 작업 큐에 속한다.
- 반드시 메모리를 가지는 것은 아니며, 작업 큐가 가장 넓은 개념이고 그 안에 준비 큐와 장치 큐가 속해 있다.


## 스케줄러
> 어떤 프로세스에게 자원을 할당할지 결정하는 운영체제 커널의 코드를 지칭

### 장기 스케줄러
> 어떤 프로세스를 준비 큐에 진입시킬지 결정하는 역할
- 시작 상태의 프로세스 중 어떠한 프로세스를 준비 큐에 삽입할 것인가를 결정하는 역할을 한다.
- 준비 큐는 CPU만 얻으면 당장 실행될 수 있는 프로세스의 집합이고, CPU를 얻기 위해서는 프로세스가 메모리를 보유해야 하므로 장기 스케줄러는 **프로세스에게 메모리를 할당하는 문제에 관여**한다.
- 메모리에 동시에 올라가 있는 프로세스의 수를 조절하는 역할을 한다.
- 현대 운영체제에서는 장기 스케줄러를 사용하지 않고, 프로세스가 시작되면 곧바로 프로세스에 메모리를 할당해 준비 큐에 넣어준다.

### 단기 스케줄러
> 준비 상태의 프로세스 중 어떤 프로세스를 다음번에 실행 상태로 만들 것인지 결정하는 역할
- 준비 큐의 여러 프로세스 중 어떠한 프로세스에게 CPU를 할당할 것인가를 단기 스케줄러가 결정한다.
- 시분할 시스템에서는 타이머 인터럽트가 발생하면 단기 스케줄러가 호출된다.

### 중기 스케줄러
> 너무 많은 프로세스에게 메모리를 할당해 시스템의 성능이 저하되는 경우, 이를 해결하기 위해 메모리에 적재된 프로세스의 수를 동적으로 조절하기 위한 스케줄러
- 너무 많은 프로세스가 메모리에 적재되어 프로세스당 보유하고 있는 메모리 양이 극도로 적어지면, CPU 수행에 당장 필요한 프로세스의 주소 공간조차도 메모리에 올려놓기 어려운 상황이 발생한다. 
- 그렇게 되면 스왑이 많이 일어나서 디스크 입출력이 수시로 발생하게 되고, 그로 인해 시스템의 성능이 심각하게 저하될 수 있다.
- 중기 스케줄러는 위와 같은 경우 메모리에 올라와 있는 프로세스 중 일부를 선정해 이들로부터 메모리를 통째로 빼앗아 그 내용을 디스크의 스왑 영역에 저장해둔다. 이와 같은 행위를 **스왑 아웃**이라고 한다.
- 메모리를 디스크로 스왑 아웃시킨다고 가정했을 때 가장 높은 우선순위는 봉쇄 상태의 프로세스들이다.
    > 당장 CPU를 획득할 수 있는 가능성이 없으므로 메모리를 보유하는 것 또한 의미가 없기 때문이다.
