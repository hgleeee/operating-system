# IPC (Inter-Process Communication)
> 하나의 컴퓨터 내에서 실행 중인 서로 다른 프로세스 간에 발생하는 통신

## IPC 탄생 배경
- 프로세스는 각자 자신만의 독립적인 주소 공간을 가지고 수행되며, 프로세스가 다른 프로세스의 주소 공간을 참조하는 것은 허용되지 않는다.
- 하지만, 경우에 따라서는 독립적인 프로세스들이 협력할 때 업무의 효율성이 증진될 수 있다.
- 운영체제는 프로세스 간의 협력 메커니즘을 제공하여 프로세스 간에 영향을 미칠 수 있게 하였다.

## IPC란?
- 공유 데이터를 두 프로세스가 사용할 수 있다고 했을 때, 데이터의 불일치 문제가 발생할 수 있다.
- 따라서, 의사소통 기능과 함께 동기화를 보장해주어야 한다.
    > 하나의 프로세스가 공유 데이터의 값을 변경하는 동안에 다른 프로세스의 접근을 막아야 한다.
- IPC는 프로세스들 간의 통신과 동기화를 이루기 위한 메커니즘을 의미한다.

## IPC 방법 2가지
> IPC의 대표적인 방법으로 메시지 전달 방식과 공유 메모리 방식이 있다. 이 두 방식의 차이는 프로세스 사이에 공유 데이터를 사용하는가 그렇지 않은가에 있다.
### 메시지 전달 방식
> 프로세스 간에 공유 데이터를 일절 사용하지 않고, 메시지를 주고받으면서 통신하는 방식
- 두 프로세스의 주소 공간이 다르므로, 커널이 메시지 전달의 역할을 하게 된다.
- 프로세스는 전달할 메시지를 운영체제에게 **시스템 콜(System Call)** 방식으로 요청해 전달할 수 있다.
- 메시지를 프로세스끼리 직접 주고 받을수 있다면 원하지 않는 메시지를 전달해 다른 프로세스에 악영향을 미칠 수 있으므로 운영체제는 메시지를 주고받는 연산을 특권명령으로 규정해 커널을 통해서만 가능하도록 한다.

#### 직접 통신
> 통신하려는 프로세스의 이름을 명시한다.
- send(p, message) : 프로세스 p에게 메세지를 전송하는 것을 의미한다.
- receive(Q, message) : 프로세스 Q로부터 메세지를 전달 받는 것을 의미한다.

#### 간접 통신
> 메세지를 메일 박스 또는 포트로부터 전달받는다.
- 각 메일박스에는 고유 ID가 있으며 메일 박스를 공유하는 프로세스들만 서로 통신할 수 있다.
- 간접 통신에서 사용되는 커뮤니케이션 링크는 여러 프로세스 간에 메일 박스를 공유하는 경우에만 생성된다.
- 하나의 링크가 여러 프로세스들에게 할당될 수 있고, 각 프로세스의 쌍은 여러 링크를 공유할 수 있다.
- send(A, message) : A라는 메일박스에 메세지를 전송한다.
- receive(A, message) : A라는 메일박스로부터 메세지를 전달 받는다.

### 공유 메모리 방식
> 프로세스들이 주소 공간의 일부를 공유한다.

- 서로 다른 프로세스 A와 B는 각자 독립적인 주소 공간을 가지므로 프로세스 A가 자신의 주소 공간에 특정한 내용을 쓸 경우 이는 자신만 볼 수 있게 된다. 
- 그러나 운영체제는 공유메모리를 사용하는 시스템 콜을 지원해, 서로 다른 프로세스들이 그들의 주소 공간 중 일부를 공유할 수 있도록 한다. 
- 이러한 공유메모리 영역은 각자의 주소 공간에 공통적으로 포함되는 영역이므로 여러 프로세스가 읽고 쓰는 것이 가능하다.

#### 공유 메모리 방식의 문제점
- 공유메모리 방식은 프로세스 간의 통신을 수월하게 만드는 인터페이스를 제공하지만, 서로의 데이터 일관성 문제가 유발될 수 있다. 
- 이에 대해서는 커널이 책임지지 않기 때문에 프로세스들끼리 직접 공유 메모리 접근에 대한 동기화 문제를 책임져야 한다.
