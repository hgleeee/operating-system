# 인터럽트의 일반적 기능

프로그램이 데이터 요청 → 장치 컨트롤러가 로컬버퍼로 읽어옴 → 인터럽트 발생시킴 → CPU가 인터럽트 처리하러 감

이런 인터럽트 처리 루틴은 코드로써 커널 내에 포함되어 있다. (운영체제 개발자가 미리 프로그래밍해서 포함시켜둠)

## 하드웨어 인터럽트와 소프트웨어 인터럽트
### 🎅 공통점
CPU의 서비스가 필요한 경우, CPU 옆에 있는 인터럽트 라인에 신호를 보내 인터럽트가 발생했음을 알려주는 방식은 동일
### 🎅 차이점
1. 하드웨어 인터럽트 : 컨트롤러 등 하드웨어 장치가 CPU의 인터럽트 라인을 세팅
2. 소프트웨어 인터럽트 : 소프트웨어가 CPU의 인터럽트 라인을 세팅 (트랩, trap)
    1. 예외사항 (exception) : 비정상적인 작업의 시도, 권한 없는 작업 시도
    2. 시스템 콜 (system call) : 사용자 프로그램이 os 내부에 정의된 코드를 실행하고 싶을 때 운영체제에 서비스를 요청하는 방법
    
    > 애플리케이션 개발자가 프로그램 작성 중 화면 출력 등의 입출력 작업을 필요로 할 경우, <br>
    > 본인이 직접 입출력 수행 코드를 작성하는 것이 아닌 이미 존재하는 커널의 코드를 호출해서 처리

## 인터럽트 벡터
- 인터럽트 종류마다 번호를 정해서, __번호에 따라 처리해야 할 코드가 위치한 부분을 가리키는 자료구조__

- 실제 처리해야 할 코드는 인터럽트 처리루틴 또는 인터럽트 핸들러라고 불리는 다른 곳에 정의된다.

## 인터럽트 핸들링
- 인터럽트가 발생한 경우에 처리해야 할 일의 절차를 의미

### 처리 루틴
1. 프로그램 A가 실행되던 중 인터럽트가 발생하면, 해당 프로그램의 실행 상태를 PCB에 저장한 후 CPU의 제어권은 인터럽트 핸들러로 넘어가게 된다.
2. 인터럽트 처리가 끝나면 저장된 상태를 PCB로부터 CPU 상에 복원해 인터럽트 수행 직전의 위치부터 실행을 이어나간다.

### PCB (Process Control Block)
- 현재 시스템 내에서 실행되는 프로그램을 관리하기 위한 자료구조
- 각각의 프로그램마다 하나씩 존재하며 해당 프로그램의 어느 부분이 실행중이었는지를 저장한다.
- 프로그램이 실행 중이었던 코드의 메모리 주소, 레지스터값, 하드웨어 상태 등..

### 결론
- 오늘날의 컴퓨터에서 운영체제는 인터럽트가 발생할 때에만 실행된다.
- 운영체제가 직접 CPU를 점유하는 경우는 인터럽트에 의하지 않고서는 발생하지 않는다. 그 외에는 사용자 프로그램이 점유.
