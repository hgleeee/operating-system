# 운영체제의 자원 관리 기능
> __운영체제의 가장 핵심적인 기능은 자원을 효율적으로 관리하는 것__


## 자원이란?
- 하드웨어 자원 : CPU와 메모리를 비롯한 주변 장치, 입출력 장치 등
> CPU : 통상적으로 컴퓨터 한 대에 하나씩 장착되기 때문에 여러 프로세스들이 CPU를 효율적으로 나누어 사용할 수 있도록 관리해야 한다.

> 메모리 : 시스템 내에 한정된 용량만 존재하므로 서로 다른 다수의 프로세스들이 나누어 쓸 수 있도록 해야 한다.

> CPU와 메모리는 전원이 꺼지면 처리중인 정보가 지워지므로 전원이 나가도 기억해야 하는 부분을 입출력 장치 중 한 종류인 보조기억장치에 파일 형태로 저장한다.

- 소프트웨어 자원


## CPU 스케줄링
> CPU를 가장 효율적으로 사용하면서 특정 프로세스가 불이익을 당하지 않도록 하는 것

- 선입선출(FCFS) : 먼저 도착한 프로세스 먼저 처리
  - CPU 자체의 효율적인 사용 측면에서는 문제 X, 전체 시스템 입장에서는 비효율적일 수 있음
  - 짧은 시간만 CPU를 사용하면 되는 프로세스들이 선행 프로세스가 종료될 때까지 장시간 기다려야 한다.

- 라운드 로빈(Round Robin)
  - CPU를 한 번 할당받아 사용할 수 있는 시간을 고정된 시간으로 제한
  - 정해진 시간이 지나면 CPU를 내어놓고 CPU 대기열의 제일 뒤에 가서 줄을 서야 한다.
  - 일반적으로 할당시간은 밀리초 단위를 사용하고 응답 시간은 1초 이하를 보장

- 우선순위 스케줄링 (Priority)
  - 우선순위가 높은 프로세스에 CPU 먼저 할당
  - 기다리는 시간이 늘어날수록 우선순위를 점차 높여주는 방안 활용 가능


## 메모리 관리
> 한정된 메모리 공간에 여러 프로그램을 수용하기 위함

- 고정분할 (fixed partition)
    - 물리적 메모리를 몇 개의 분할로 미리 나누어 관리한다.
    - ❌ 융통성이 없음 (메모리에 동시 적재되는 최대 프로그램 수가 분할 개수로 한정됨)
    - ❌ 메모리를 효율적으로 사용할 수 없음 (분할의 크기보다 큰 프로그램은 적재 불가능, 분할의 크기보다 작은 프로그램이 적재되는 경우 메모리 낭비)
    - 내부조각 : 해당 분할에 올라온 프로그램에 의해 사용되지 않고, 다른 프로그램에도 할당될 수 없는 낭비공간
- 가변분할 (variable partition)
    - 매 시점 프로그램의 크기에 맞게 메모리 분할해서 사용
    - ❌ 물리적 메모리의 크기보다 더 큰 프로그램은 여전히 불가능
    - 분할의 크기와 개수가 동적으로 변하므로 기술적 관리기법 필요
    - 외부조각 : 프로그램에 할당되지는 않았지만 크기가 작아 프로그램을 올리지 못하는 낭비공간
- 가상메모리 (virtual memory) : 가장 널리 사용되는 메모리 관리 기법
    - ✅ 물리적 메모리보다 더 큰 프로그램이 실행되는 것 지원
    - 모든 프로그램은 물리적 메모리와 독립적으로 0번지부터 시작하는 자신만의 가상메모리 주소를 가짐
    - 운영체제는 이 가상메모리 주소를 물리적 메모리 주소로 매핑하는 기술을 이용해 주소 변환 후 프로그램을 물리적 메모리에 올림
    - 현재 사용되고 있는 부분만 메모리에 올리고, 나머지는 하드디스크와 같은 보조기억장치(스왑 영역)에 저장해두었다가 필요할 때 적재
    - 페이징(paging) : 동일한 단위로 메모리를 나누는 기법, 프로그램을 구성하는 가상메모리 주소 공간은 페이지(page)라는 동일한 크기의 작은 단위로 나누어 물리적 메모리와 스왑 영역에 일부분씩 저장

### 인터럽트
> 주변장치 및 입출력 장치의 관리

- 주변장치들은 CPU가 필요한 경우 신호를 발생시켜 서비스를 요청 ⇒ 인터럽트
- CPU는 스케줄링에 따라 작업을 수행하다가 인터럽트가 발생하면 잠시 멈추고 요청 서비스 수행 ⇒ 인터럽트 처리 완료 후 원래 하던 작업 계속 수행
- 인터럽트가 발생했을 때 직전의 작업상태를 잠시 저장해둠
- 컨트롤러(controller) : 각 장치마다 일어나는 업무를 관리하기 위한 작은 CPU
