# CPU 스케줄러와 디스패처
## CPU 스케줄러
> 준비 큐의 프로세스들 중 누구에게 CPU를 할당할지 결정하는 운영체제 코드

### CPU 스케줄러가 필요한 경우
1. 실행 상태에 있던 프로세스가 I/O 요청 등에 의해 봉쇄 상태로 바뀌는 경우
2. 실행 상태에 있던 프로세스가 타이머 인터럽트 발생에 의해 준비 상태로 바뀌는 경우
3. I/O 요청으로 봉쇄 상태에 있던 프로세스의 I/O 작업이 끝나 인터럽트가 발생하고 그 결과 프로세스의 상태가 준비 상태로 바뀌는 경우
4. CPU에서 실행상태에 있던 프로세스가 종료되는 경우
⇒ 1, 4는 비선점형 스케줄링 / 2, 3은 선점형 스케줄링

### CPU 스케줄링 방식
#### 비선점형(nonpreemptive) 방식
- CPU를 획득한 프로세스가 스스로 CPU를 반납하기 전까지 CPU를 빼앗기지 않는 방식

#### 선점형(preemptive) 방식
- 프로세스가 CPU를 계속 사용하길 원하더라도 강제로 빼앗을 수 있는 방식
- CPU 할당시간을 부여한 후 타이머 인터럽트를 발생시키는 방법으로 CPU를 빼앗아 옴

## 디스패처
> CPU 스케줄러가 어떤 프로세스에게 CPU를 할당해야 할지 결정하고 나면, 선택된 프로세스에게 실제로 CPU를 이양하는 작업이 필요

### 정의
- 새롭게 선택된 프로세스가 CPU를 할당받고 작업을 수행할 수 있도록 환경설정을 하는 운영체제의 코드

### 방식
- 현재 수행중이던 프로세스의 문맥(context)을 그 프로세스의 PCB에 저장하고, 새롭게 선택된 프로세스의 문맥을 PCB로부터 복원한 후 그 프로세스에게 CPU를 넘기는 과정을 수행한다.
- 새로운 프로세스의 문맥을 복원시킨 후, 시스템의 상태를 사용자모드로 전환해 사용자 프로그램에게 CPU의 제어권을 넘긴다. (사용자 프로그램은 PC로부터 현재 수행할 주소를 찾을 수 있게 됨)

### 디스패치 지연시간
- 디스패처가 하나의 프로세스를 정지시키고 다른 프로세스에게 CPU를 전달하기까지 걸리는 시간
- 디스패치 지연시간의 대부분은 문맥교환 오버헤드에 해당된다.
